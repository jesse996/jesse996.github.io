<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta http-equiv=x-ua-compatible content="IE=edge, chrome=1"><title>Arch安装 - Jesse's Blog</title><meta name=Description content="Jesse的博客"><meta property="og:title" content="Arch安装"><meta property="og:description" content="验证启动模式（BIOS 还是 EFI） 要验证启动模式，请用下列命令列出 efivars 目录： 1 # ls /sys/firmware/efi/efivars 如果命令没有错误地显示了目录，则系统以 UEFI 模式启动。 如果目录"><meta property="og:type" content="article"><meta property="og:url" content="https://www.jesse233.top/2020/10/arch%E5%AE%89%E8%A3%85/"><meta property="og:image" content="https://www.jesse233.top/avatar.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-10-20T08:20:47+08:00"><meta property="article:modified_time" content="2020-10-22T00:00:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.jesse233.top/avatar.png"><meta name=twitter:title content="Arch安装"><meta name=twitter:description content="验证启动模式（BIOS 还是 EFI） 要验证启动模式，请用下列命令列出 efivars 目录： 1 # ls /sys/firmware/efi/efivars 如果命令没有错误地显示了目录，则系统以 UEFI 模式启动。 如果目录"><meta name=application-name content="LoveIt"><meta name=apple-mobile-web-app-title content="LoveIt"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel=icon href=/favicon.svg><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://www.jesse233.top/2020/10/arch%E5%AE%89%E8%A3%85/><link rel=prev href=https://www.jesse233.top/2020/10/elastic%E7%AC%94%E8%AE%B0/><link rel=next href=https://www.jesse233.top/2020/10/metaspolit5%E7%AC%94%E8%AE%B0/><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13.0/css/all.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@3.7.2/animate.min.css><meta name=baidu-site-verification content="yJZ8DYA9pA"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Arch安装","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/www.jesse233.top\/2020\/10\/arch%E5%AE%89%E8%A3%85\/"},"genre":"posts","wordcount":3799,"url":"https:\/\/www.jesse233.top\/2020\/10\/arch%E5%AE%89%E8%A3%85\/","datePublished":"2020-10-20T08:20:47+08:00","dateModified":"2020-10-22T00:00:00+00:00","publisher":{"@type":"Organization","name":"宋志新"},"author":{"@type":"Person","name":"Jesse"},"description":""}</script></head><body header-desktop=fixed header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem('theme')?localStorage.getItem('theme')==='dark':'auto'==='auto'?window.matchMedia('(prefers-color-scheme: dark)').matches:'auto'==='dark')&&document.body.setAttribute('theme','dark')</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="Jesse's Blog"><img class="lazyload logo" src=/svg/loading.min.svg data-src=/favicon.svg data-srcset="/favicon.svg, /favicon.svg 1.5x, /favicon.svg 2x" data-sizes=auto alt=/favicon.svg title=/favicon.svg>Jesse's Blog</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>文章 </a><a class=menu-item href=/tags/>标签 </a><a class=menu-item href=/categories/>分类 </a><a class=menu-item href=/books>书单 </a><a class=menu-item href=/about>关于我 </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop><input type=text placeholder=搜索文章标题或内容... id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fas fa-search fa-fw"></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=清空><i class="fas fa-times-circle fa-fw"></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin"></i></span>
</span><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题><i class="fas fa-adjust fa-fw"></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="Jesse's Blog"><img class="lazyload logo" src=/svg/loading.min.svg data-src=/favicon.svg data-srcset="/favicon.svg, /favicon.svg 1.5x, /favicon.svg 2x" data-sizes=auto alt=/favicon.svg title=/favicon.svg>Jesse's Blog</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=搜索文章标题或内容... id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fas fa-search fa-fw"></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=清空><i class="fas fa-times-circle fa-fw"></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin"></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>取消</a></div><a class=menu-item href=/posts/ title>文章</a><a class=menu-item href=/tags/ title>标签</a><a class=menu-item href=/categories/ title>分类</a><a class=menu-item href=/books title>书单</a><a class=menu-item href=/about title>关于我</a><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题>
<i class="fas fa-adjust fa-fw"></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>目录</h2><div class="toc-content always-active" id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animated flipInX">Arch安装</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://github.com/jesse996 title=Author target=_blank rel="noopener noreffer author" class=author><i class="fas fa-user-circle fa-fw"></i>Jesse</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2020-10-20>2020-10-20</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 3799 字&nbsp;
<i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 8 分钟&nbsp;<span id=/2020/10/arch%E5%AE%89%E8%A3%85/ class=leancloud_visitors data-flag-title=Arch安装>
<i class="far fa-eye fa-fw"></i>&nbsp;<span class=leancloud-visitors-count></span>&nbsp;次阅读
</span>&nbsp;</div></div><div class="details toc" id=toc-static kept><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fas fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><ul><li><ul><li><a href=#验证启动模式bios-还是-efi><strong>验证启动模式（BIOS 还是 EFI）</strong></a></li><li><a href=#连接到因特网><strong>连接到因特网</strong></a></li><li><a href=#wifi-连接>WIFI 连接</a></li><li><a href=#测试网络>测试网络</a></li><li><a href=#更新系统时间><strong>更新系统时间</strong></a></li><li><a href=#建立硬盘分区><strong>建立硬盘分区</strong></a></li><li><a href=#格式化分区><strong>格式化分区</strong></a></li><li><a href=#挂载分区><strong>挂载分区</strong></a></li><li><a href=#选择镜像><strong>选择镜像</strong></a></li><li><a href=#安装必须的软件包><strong>安装必须的软件包</strong></a></li><li><a href=#安装bootloader><strong>安装<code>Bootloader</code></strong></a></li><li><a href=#如果为-biosmbr-引导方式><strong>如果为 BIOS/MBR 引导方式：</strong></a></li><li><a href=#如果为-efigpt-引导方式><strong>如果为 EFI/GPT 引导方式：</strong></a></li></ul></li><li><a href=#安装网络>安装网络</a></li><li><a href=#声卡驱动><strong>声卡驱动</strong></a></li><li><a href=#添加用户>添加用户</a><ul><li><a href=#安装-xorg><strong>安装 Xorg</strong></a></li><li><a href=#安装桌面环境><strong>安装桌面环境</strong></a></li><li><a href=#安装-kdeplasma><strong>安装 KDE(Plasma)</strong></a></li><li><a href=#安装桌面管理器><strong>安装桌面管理器</strong></a></li><li><a href=#kde安装-sddm>kde<strong>安装 sddm</strong></a></li><li><a href=#gnome-安装-gdm>gnome 安装 gdm</a></li></ul></li><li><a href=#安装字体>安装字体</a></li></ul></li><li><a href=#gnome-shell-扩展><strong>GNOME Shell 扩展</strong></a><ul><li><a href=#降级软件包>降级软件包</a></li><li><a href=#问题>问题：</a><ul><li><a href=#guake-在-wayland-下问题解决>guake 在 wayland 下问题解决：</a></li></ul></li></ul></li></ul></nav></div></div><div class=content id=content><h3 id=验证启动模式bios-还是-efi><strong>验证启动模式（BIOS 还是 EFI）</strong></h3><p>要验证启动模式，请用下列命令列出  <strong><a href=https://wiki.archlinux.org/index.php/Efivars target=_blank rel="noopener noreffer">efivars</a></strong>  目录：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash><span class=c1># ls /sys/firmware/efi/efivars</span>
</code></pre></td></tr></table></div></div><p>如果命令没有错误地显示了目录，则系统以 UEFI 模式启动。 如果目录不存在，系统可能以  <strong><a href=https://en.wikipedia.org/wiki/BIOS target=_blank rel="noopener noreffer">BIOS</a></strong>  模式 (或  <strong><a href=https://en.wikipedia.org/wiki/Compatibility_Support_Module target=_blank rel="noopener noreffer">CSM</a></strong>  模式) 启动。</p><h3 id=连接到因特网><strong>连接到因特网</strong></h3><p>用下面步骤设置网络：</p><ul><li><p>确保系统已经启用了  <strong><a href=https://wiki.archlinux.org/index.php/Network_configuration#Network_interfaces target=_blank rel="noopener noreffer">网络接口</a></strong>，用  <strong><a href=https://jlk.fjfi.cvut.cz/arch/manpages/man/ip-link.8 target=_blank rel="noopener noreffer">ip-link(8)</a></strong>  检查:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>ip link
</code></pre></td></tr></table></div></div></li><li><p>对于无线网络，请确保无线网卡未被  <strong><a href=https://wiki.archlinux.org/index.php/Rfkill target=_blank rel="noopener noreffer">rfkill</a></strong>  禁用。</p></li><li><p>要连接到网络:</p><ul><li>有线以太网 —— 连接网线</li><li>WiFi —— 使用 <strong><a href=https://wiki.archlinux.org/index.php/Iwctl target=_blank rel="noopener noreffer">iwctl</a></strong> 验证无线网络</li></ul></li><li><p>配置网络连接:</p><ul><li><strong><a href=https://wiki.archlinux.org/index.php/DHCP target=_blank rel="noopener noreffer">DHCP</a></strong>: 动态 IP 地址和 DNS 服务器分配 (由  <strong><a href=https://wiki.archlinux.org/index.php/Systemd-networkd target=_blank rel="noopener noreffer">systemd-networkd</a></strong>  和  <strong><a href=https://wiki.archlinux.org/index.php/Systemd-resolved target=_blank rel="noopener noreffer">systemd-resolved</a></strong>  提供) 对于  <strong><a href=https://gitlab.archlinux.org/archlinux/archiso/-/blob/master/configs/releng/airootfs/etc/systemd/network/20-ethernet.network target=_blank rel="noopener noreffer">有线</a></strong>  和  <strong><a href=https://gitlab.archlinux.org/archlinux/archiso/-/blob/master/configs/releng/airootfs/etc/systemd/network/20-wireless.network target=_blank rel="noopener noreffer">无线</a></strong>  网络接口来说应该能开箱即用。</li><li>静态 IP 地址: 按照  <strong><a href=https://wiki.archlinux.org/index.php/Network_configuration#Static_IP_address target=_blank rel="noopener noreffer">Network configuration#Static IP address</a></strong>  进行操作。</li></ul></li><li><p>用  <strong><a href=https://en.wikipedia.org/wiki/ping_%28networking_utility%29 target=_blank rel="noopener noreffer">ping</a></strong>  检查网络连接:</p></li></ul><h3 id=wifi-连接>WIFI 连接</h3><p>输入</p><p><code>iwctl</code></p><p>进入 iwd 模式，输入</p><p><code>device list</code></p><p>查看你的网卡名字，这里假设是 wlan0，输入</p><p><code>station wlan0 scan</code></p><p>检查扫描网络，输入</p><p><code>station wlan0 get-networks</code></p><p>查看网络名字，假设名字叫 BUPT-portal，输入</p><p><code>station wlan0 connect BUPT-portal</code></p><p>接着输入密码（如果有密码的话），输入</p><p><code>exit</code></p><p>退出 iwd 模式</p><h3 id=测试网络>测试网络</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>ping baidu.com
</code></pre></td></tr></table></div></div><p>使用 reflector 来获取速度最快的 6 个镜像，并将地址保存至/etc/pacman.d/mirrorlist</p><p><code>reflector -c China -a 6 --sort rate --save /etc/pacman.d/mirrorlist</code></p><h3 id=更新系统时间><strong>更新系统时间</strong></h3><p>使用  <strong><a href=https://jlk.fjfi.cvut.cz/arch/manpages/man/timedatectl.1 target=_blank rel="noopener noreffer">timedatectl(1)</a></strong>  确保系统时间是准确的：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>timedatectl set-ntp <span class=nb>true</span>
</code></pre></td></tr></table></div></div><p>可以使用  <code>timedatectl status</code>  检查服务状态。</p><h3 id=建立硬盘分区><strong>建立硬盘分区</strong></h3><p>磁盘若被系统识别到，就会被分配为一个**<a href=https://en.wikipedia.org/wiki/zh:%E8%AE%BE%E5%A4%87%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F#.E5.91.BD.E5.90.8D.E7.BA.A6.E5.AE.9A target=_blank rel="noopener noreffer">块设备</a>**，如  <code>/dev/sda</code>, <code>/dev/nvme0n1</code>  或  <code>/dev/mmcblk0</code>。可以使用  **<a href=https://wiki.archlinux.org/index.php/Lsblk target=_blank rel="noopener noreffer">lsblk</a>**  或者  fdisk  查看：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>fdisk -l

</code></pre></td></tr></table></div></div><p>结果中以  <code>rom</code>，<code>loop</code>  或者  <code>airoot</code>  结束的可以被忽略</p><p>对于一个选定的设备，以下的分区是必须要有的：</p><ul><li>一个根分区（挂载在  <strong><a href=https://en.wikipedia.org/wiki/Root_directory target=_blank rel="noopener noreffer">根目录</a></strong>）<code>/</code>；</li><li>要在  <strong><a href=https://wiki.archlinux.org/index.php/UEFI target=_blank rel="noopener noreffer">UEFI</a></strong>  模式中启动，还需要一个  <strong><a href=https://wiki.archlinux.org/index.php/EFI_system_partition target=_blank rel="noopener noreffer">EFI 系统分区</a></strong>。</li></ul><p>用 cfdisk 分区</p><h3 id=格式化分区><strong>格式化分区</strong></h3><p>当分区建立好了，这些分区都需要使用适当的  <strong><a href=https://wiki.archlinux.org/index.php/File_systems_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29 target=_blank rel="noopener noreffer">文件系统</a></strong>  进行格式化。举个例子，如果根分区在  <code>/dev/sdX1</code>  上并且要使用 Ext4 文件系统，运行：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash> mkfs.ext4 /dev/sdX1
</code></pre></td></tr></table></div></div><p>如果创建了  <strong><a href=https://wiki.archlinux.org/index.php/Swap_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29 target=_blank rel="noopener noreffer">交换分区</a></strong> (例如  <code>/dev/sda3</code>)，请使用  <strong><a href=https://jlk.fjfi.cvut.cz/arch/manpages/man/mkswap.8 target=_blank rel="noopener noreffer">mkswap(8)</a></strong>  将其初始化：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash> mkswap /dev/sdX2
 swapon /dev/sdX2
</code></pre></td></tr></table></div></div><h3 id=挂载分区><strong>挂载分区</strong></h3><p>将根分区**<a href=https://wiki.archlinux.org/index.php/Mount target=_blank rel="noopener noreffer">挂载</a>**到  <code>/mnt</code>，例如：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>mount /dev/sdX1 /mnt
mkdir /mnt/boot
mount /dev/sdX2 /mnt/boot
</code></pre></td></tr></table></div></div><p>然后使用  <strong><a href=https://jlk.fjfi.cvut.cz/arch/manpages/man/mkdir.1 target=_blank rel="noopener noreffer">mkdir(1)</a></strong>  创建其他剩余的挂载点（比如  <code>/mnt/efi</code>）并挂载其相应的分区。</p><p>稍后  <strong><a href=https://jlk.fjfi.cvut.cz/arch/manpages/man/genfstab.8 target=_blank rel="noopener noreffer">genfstab(8)</a></strong>  将自动检测挂载的文件系统和交换空间。</p><h3 id=选择镜像><strong>选择镜像</strong></h3><p>文件  <code>/etc/pacman.d/mirrorlist</code>  定义了软件包会从哪个**<a href=https://wiki.archlinux.org/index.php/Mirrors target=_blank rel="noopener noreffer">镜像源</a>**下载。在 LiveCD 启动的系统上，在连接到因特网后，**<a href=https://wiki.archlinux.org/index.php/Reflector target=_blank rel="noopener noreffer">reflector</a>**  会通过选择最近一个小时已同步的 HTTPS 镜像并按下载速率对其进行排序来更新镜像列表。</p><p>在列表中越前的镜像在下载软件包时有越高的优先权。您或许想检查一下文件，看看是否满意。如果不满意，可以相应的修改  <code>/etc/pacman.d/mirrorlist</code>  文件，并将地理位置最近的镜像源挪到文件的头部，同时也应该考虑一些其他标准。</p><p>这个文件接下来还会被  pacstrap  拷贝到新系统里，所以请确保设置正确。</p><h3 id=安装必须的软件包><strong>安装必须的软件包</strong></h3><p>使用  <strong><a href=https://git.archlinux.org/arch-install-scripts.git/tree/pacstrap.in target=_blank rel="noopener noreffer">pacstrap</a></strong>  脚本，安装  <strong><a href="https://www.archlinux.org/packages/?name=base" target=_blank rel="noopener noreffer">base</a></strong>  软件包和 Linux **<a href=https://wiki.archlinux.org/index.php/Kernel target=_blank rel="noopener noreffer">内核</a>**以及常规硬件的固件：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>pacstrap /mnt base linux linux-firmware base-devel
</code></pre></td></tr></table></div></div><p>除了这些包以外，我们还可以安装许多其他的包，其中一个比较重要的就是一定要装上一个网络管理器，不然你的新系统启动以后连不上网就傻了。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>pacstrap /mnt networkmanager vim
</code></pre></td></tr></table></div></div><p>networkmanager 用来联网，vim 用来编辑配置文件。只要能连上网，别的软件都可以晚点装，所以目前装这么多东西就足够了。</p><p>生成分区表：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>genfstab -U /mnt &gt;&gt; /mnt/etc/fstab
</code></pre></td></tr></table></div></div><p>由于这步比较重要，所以我们需要输出生成的文件来检查是否正确，执行以下命令：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>cat /mnt/etc/fstab
</code></pre></td></tr></table></div></div><p>进入新系统：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>arch-chroot /mnt
</code></pre></td></tr></table></div></div><p>这里顺便说一下，如果以后我们的系统出现了问题，只要插入 U 盘并启动， 将我们的系统根分区挂载到了/mnt 下（如果有 efi 分区也要挂载到/mnt/boot 下），再通过这条命令就可以进入我们的系统进行修复操作。</p><p>设置时区和硬件时间：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
hwclock --systoh
</code></pre></td></tr></table></div></div><p>本地化设置，使用 vim 打开<code>/etc/locale.gen</code>，把<code>en_US.UTF-8 UTF-8</code>和<code>zh_CN.UTF-8 UTF-8</code>取消注释，然后保存退出。运行下面两条命令：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>locale-gen
<span class=nb>echo</span> <span class=nv>LANG</span><span class=o>=</span>en_US.UTF-8 &gt;&gt; /etc/locale.conf
</code></pre></td></tr></table></div></div><p>设置网络(这里的 myhostname 取一个自己喜欢的名字)：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash><span class=nb>echo</span> myhostname &gt;&gt; /etc/hostname
</code></pre></td></tr></table></div></div><p>使用 vim 打开/etc/hosts，在里面输入（myhostname 换成上面自己取的名字）：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>127.0.0.1	localhost
::1	localhost
127.0.1.1	myhostname.localdomain	myhostname
</code></pre></td></tr></table></div></div><p>设置 root 用户的密码（连输两遍，输入时无显示）：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>passwd
</code></pre></td></tr></table></div></div><p>intel 的 CPU 安装<code>intel-ucode</code>，amd 的 CPU 安装<code>amd-ucode</code>。如果不太确定自己的 cpu 型号，可以安装一个<code>neofetch</code>，然后使用<code>neofetch</code>进行查看。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>*# 可选项*
pacman -S neofetch
neofetch *# 查看cpu和显卡信息# 必选项*
pacman -S intel-ucode
pacman -S amd-ucode *# 根据实际情况安装*
</code></pre></td></tr></table></div></div><h3 id=安装bootloader><strong>安装<code>Bootloader</code></strong></h3><p>这里我们安装最流行的<code>Grub2</code>。<strong>（如果曾经装过<code>Linux</code>，记得删掉原来的<code>Grub</code>，否则不可能成功启动）</strong></p><ul><li>首先安装<code>os-prober</code>和<code>ntfs-3g</code>这两个包，它可以配合<code>Grub</code>检测已经存在的系统，自动设置启动选项。</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>pacman -S os-prober ntfs-3g
</code></pre></td></tr></table></div></div><hr><h3 id=如果为-biosmbr-引导方式><strong>如果为 BIOS/MBR 引导方式：</strong></h3><ul><li>安装<code>grub</code>包：</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>pacman -S grub
</code></pre></td></tr></table></div></div><ul><li>部署 grub</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>grub-install --target<span class=o>=</span>i386-pc /dev/sdx （将sdx换成你安装的硬盘）
</code></pre></td></tr></table></div></div><ul><li>生成配置文件：</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>grub-mkconfig -o /boot/grub/grub.cfg
</code></pre></td></tr></table></div></div><hr><h3 id=如果为-efigpt-引导方式><strong>如果为 EFI/GPT 引导方式：</strong></h3><ul><li>安装<code>grub</code>与<code>efibootmgr</code>两个包：</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>pacman -S grub efibootmgr dialog
pacman -S network-manager-applet   mtools dosfstools base-devel linux-headers
</code></pre></td></tr></table></div></div><ul><li>部署<code>grub</code>：</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>grub-install --target<span class=o>=</span>x86_64-efi --efi-directory<span class=o>=</span>/boot --bootloader-id<span class=o>=</span>grub
</code></pre></td></tr></table></div></div><ul><li>生成配置文件：</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>grub-mkconfig -o /boot/grub/grub.cfg
</code></pre></td></tr></table></div></div><p>如果报<code>warning failed to connect to lvmetad，falling back to device scanning.</code>错误。参照<a href=https://www.pckr.co.uk/arch-grub-mkconfig-lvmetad-failures-inside-chroot-install/ target=_blank rel="noopener noreffer">这篇文章</a>，简单的方法是编辑<code>/etc/lvm/lvm.conf</code>这个文件，找到<code>use_lvmetad = 1</code>将<code>1</code>修改为<code>0</code>，保存，重新配置 grub。</p><p>如果报<code>grub-probe: error: cannot find a GRUB drive for /dev/sdb1, check your device.map</code>类似错误，并且<code>sdb1</code>这个地方是你的 u 盘，这是 u 盘<code>uefi</code>分区造成的错误，对我们的正常安装没有影响，可以不用理会这条错误。</p><hr><p><strong>如果你是多系统，请注意上面一节中对<code>os-prober</code>这个包的安装。</strong></p><p><strong>强烈建议使用如下命令检查是否成功生成各系统的入口，如果没有正常生成会出现开机没有系统入口的情况：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>vim /boot/grub/grub.cfg
</code></pre></td></tr></table></div></div><p>检查接近末尾的<code>menuentry</code>部分是否有<code>windows</code>或其他系统名入口。</p><p>如果你没有看到 Arch Linux 系统入口或者该文件不存在，请先检查/boot 目录是否正确部署 linux 内核：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>ls /boot
</code></pre></td></tr></table></div></div><p>查看是否有 initramfs-linux-fallback.img initramfs-linux.img intel-ucode.img vmlinuz-linux 这几个文件，如果都没有，说明 linux 内核没有被正确部署，很有可能是/boot 目录没有被正确挂载导致的，确认/boot 目录无误后，可以重新部署 linux 内核：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>pacman -S linux
</code></pre></td></tr></table></div></div><p>再重新生成配置文件，就可以找到系统入口。还要重新生成 fstab</p><p>退出系统，准备关机了：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash><span class=nb>exit</span>
</code></pre></td></tr></table></div></div><p><strong>如果挂载了<code>/mnt/boot</code>，先<code>umount /mnt/boot</code>，再<code>umount /mnt</code>，否则直接<code>umount /mnt</code>：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>umount /mnt/boot
umount /mnt
reboot
</code></pre></td></tr></table></div></div><h2 id=安装网络>安装网络</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>systemctl <span class=nb>enable</span> --now NetworkManager
nmtui <span class=c1>#用这个图像连接网络</span>

<span class=c1>#或者用下面的方法：</span>
<span class=c1>#nmcli device wifi list # 搜索网络，一下子没出来可以过几秒再试试</span>
<span class=c1>#nmcli device wifi connect SSID password password</span>
<span class=c1># 上面的SSID和password分别换成自己家网络的wifi名和密码# 显然取一个不带中文的wifi名还是蛮重要的</span>
</code></pre></td></tr></table></div></div><h2 id=声卡驱动><strong>声卡驱动</strong></h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>sudo pacman -S alsa-utils pulseaudio-alsa pulseaudio
</code></pre></td></tr></table></div></div><h2 id=添加用户>添加用户</h2><p>连接上互联网以后，我们需要为自己创建一个普通用户账号，一直使用<code>root</code>不太好。<code>username</code>可以改成自己喜欢的用户名，<code>m</code>表示创建用户的家目录<code>~</code>，<code>G</code>表示把用户放进<code>wheel</code>这个组。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>useradd -m -G wheel username
</code></pre></td></tr></table></div></div><p>创建完用户以后，设置一下用户的密码：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>passwd username
</code></pre></td></tr></table></div></div><p>为了让普通用户能够暂时获得管理权限，我们需要安装<code>sudo</code>包：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>pacman -S sudo
</code></pre></td></tr></table></div></div><p>安装完毕以后，使用 vim 打开<code>/etc/sudoers</code>，找到<code>wheel ALL=(ALL) ALL</code>这一行取消注释，然后使用<code>:wq!</code>强制改写该文件，使得<code>wheel</code>这个组内的用户都可以使用<code>sudo</code>。</p><p>使用<code>su username</code>（username 换成自己刚刚设置好的名字）换成普通用户登录系统，我们就可以正式开始使用 archlinux 系统了。</p><h3 id=安装-xorg><strong>安装 Xorg</strong></h3><p><code>Xorg</code>是<code>Linux</code>下的一个著名的开源图形服务，我们的桌面环境需要<code>Xorg</code>的支持。</p><p>执行如下命令安装<code>Xorg</code>及相关组件：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>udo pacman -S xorg
</code></pre></td></tr></table></div></div><h3 id=安装桌面环境><strong>安装桌面环境</strong></h3><p><code>Linux</code>下有很多著名的桌面环境如<code>Xfce</code>、<code>KDE(Plasma)</code>、<code>Gnome</code>、<code>Unity</code>、<code>Deepin</code>等等，它们的外观、操作、设计理念等各方面都有所不同， 在它们之间的比较与选择网上有很多的资料可以去查。</p><p>更多桌面环境的安装指南请见下面的链接：</p><p><a href=https://wiki.archlinux.org/index.php/Desktop_environment#List_of_desktop_environments target=_blank rel="noopener noreffer">https://wiki.archlinux.org/index.php/Desktop_environment#List_of_desktop_environments</a></p><h3 id=安装-kdeplasma><strong>安装 KDE(Plasma)</strong></h3><p>直接安装软件包组（包含了很多软件包）即可</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>sudo pacman -S plasma kde-applications packagekit-qt5
<span class=c1>#packagekit-qt5为了使discover工作正常</span>
</code></pre></td></tr></table></div></div><h3 id=安装桌面管理器><strong>安装桌面管理器</strong></h3><p>安装好了桌面环境包以后，我们需要安装一个图形化的桌面管理器来帮助我们登录并且选择我们使用的桌面环境，这里我推荐使用<code>sddm</code>。</p><hr><h3 id=kde安装-sddm>kde<strong>安装 sddm</strong></h3><p>sddm 已经被包含进<code>plasma</code>中，无需另外安装</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>systemctl <span class=nb>enable</span> sddm
</code></pre></td></tr></table></div></div><hr><h3 id=gnome-安装-gdm>gnome 安装 gdm</h3><p>同时你可能需要安装工具栏工具来显示网络设置图标（某些桌面环境已经装了，但是为了保险可以再装一下）：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash><span class=c1>#sudo pacman -S network-manager-applet</span>
现在不用下也有
</code></pre></td></tr></table></div></div><p>双系统和 win10 时间不一样：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>sudo timedatectl set-local-rtc <span class=nb>true</span>
</code></pre></td></tr></table></div></div><h2 id=安装字体>安装字体</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>
yay -S noto-fonts-cjk ttf-dejavu
</code></pre></td></tr></table></div></div><h1 id=gnome-shell-扩展><strong>GNOME Shell 扩展</strong></h1><p>可以在 aur 中搜索  gnome-shell-extension-扩展名   安装，如：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>**yay -S gnome-shell-extension-dash-to-dock**
</code></pre></td></tr></table></div></div><p>或者到  <a href=https://extensions.gnome.org/ target=_blank rel="noopener noreffer">GNOME Shell Extensions</a>  网站搜索下载，然后 gnome-tweak-tool 里安装启用。也可以使用浏览器安装，需要安装插件，请参考<a href=https://wiki.archlinux.org/index.php/GNOME_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29#%E6%89%A9%E5%B1%95 target=_blank rel="noopener noreffer">Arch Wiki</a>。</p><p>以下是我在使用的一些扩展：</p><ul><li>User Themes 启用后可自定义 shell 主题</li><li>Place status indicator 显示文件管理器导航菜单</li><li>Removable drive menu  显示可移除设备（如 U 盘）拔插提示</li><li>Workspace indicator  在顶栏显示当前示工作区的序号</li><li>Top panel workspace scroll 在顶栏上滚动鼠标滚轮来快速切换工作区</li><li>Dash to Dock 可以将左侧的 dash 改为置于底部的 dock 栏</li><li>OpenWeather  在顶栏显示天气情况</li><li>Media player indicator 显示音乐播放器的状态</li><li>Battery status  显示电池电量百分比</li><li>Netspeed  在顶栏上显示网速</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash><span class=c1># tray icon 托盘图标</span>
yay -S gnome-shell-extension-appindicator
</code></pre></td></tr></table></div></div><h2 id=降级软件包>降级软件包</h2><p>下载 downgrade</p><h2 id=问题>问题：</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback> [pulseaudio] bluez5-util.c: GetManagedObjects() failed: org.freedesktop.systemd1.NoSuchUnit: Unit dbus-org.bluez.service not found.

Solution:

# systemctl enable bluetooth.service
</code></pre></td></tr></table></div></div><h3 id=guake-在-wayland-下问题解决>guake 在 wayland 下问题解决：</h3><p>在系统设置的设置快捷键下设置一个快捷键 <code>f12</code> ,命令是 <code>guake -t</code></p><p>参考：</p><p><a href=https://zhuanlan.zhihu.com/p/138951848 target=_blank rel="noopener noreffer">2020 Archlinux 双系统安装教程（超详细）</a></p><p><a href=https://wiki.archlinux.org/index.php/Installation_guide_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29 target=_blank rel="noopener noreffer">Installation guide (简体中文)</a></p><p><a href=https://www.viseator.com/2017/05/17/arch_install/ target=_blank rel="noopener noreffer">以官方 Wiki 的方式安装 ArchLinux</a></p><p><a href=https://zhuanlan.zhihu.com/p/112541071 target=_blank rel="noopener noreffer">安装 archlinux 系统【2020.03.15】</a></p><p>图形界面安装：</p><p><a href=https://www.viseator.com/2017/05/19/arch_setup/ target=_blank rel="noopener noreffer">ArchLinux 安装后的必须配置与图形界面安装教程</a></p><p><a href=https://starrycat.me/archlinux-install-gnome-desktop.html#i target=_blank rel="noopener noreffer"></a></p><p>小新 air14 睡眠问题：</p><p><a href=https://wiki.archlinux.org/index.php/Lenovo_IdeaPad_5_14are05#Suspend_issues_%28S3_sleep_fix%29 target=_blank rel="noopener noreffer">Lenovo IdeaPad 5 14are05</a></p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>更新于 2020-10-22</span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md><span><a class=link-to-markdown href=/2020/10/arch%E5%AE%89%E8%A3%85/index.md target=_blank>阅读原始文档</a></span></div><div class=post-info-share><span><a href=javascript:void(0); title="分享到 Twitter" data-sharer=twitter data-url=https://www.jesse233.top/2020/10/arch%E5%AE%89%E8%A3%85/ data-title=Arch安装><i class="fab fa-twitter fa-fw"></i></a><a href=javascript:void(0); title="分享到 Facebook" data-sharer=facebook data-url=https://www.jesse233.top/2020/10/arch%E5%AE%89%E8%A3%85/><i class="fab fa-facebook-square fa-fw"></i></a><a href=javascript:void(0); title="分享到 WhatsApp" data-sharer=whatsapp data-url=https://www.jesse233.top/2020/10/arch%E5%AE%89%E8%A3%85/ data-title=Arch安装 data-web><i class="fab fa-whatsapp fa-fw"></i></a><a href=javascript:void(0); title="分享到 Line" data-sharer=line data-url=https://www.jesse233.top/2020/10/arch%E5%AE%89%E8%A3%85/ data-title=Arch安装><i data-svg-src=https://cdn.jsdelivr.net/npm/simple-icons@2.14.0/icons/line.svg></i></a><a href=javascript:void(0); title="分享到 微博" data-sharer=weibo data-url=https://www.jesse233.top/2020/10/arch%E5%AE%89%E8%A3%85/ data-title=Arch安装><i class="fab fa-weibo fa-fw"></i></a><a href=javascript:void(0); title="分享到 Myspace" data-sharer=myspace data-url=https://www.jesse233.top/2020/10/arch%E5%AE%89%E8%A3%85/ data-title=Arch安装 data-description><i data-svg-src=https://cdn.jsdelivr.net/npm/simple-icons@2.14.0/icons/myspace.svg></i></a><a href=javascript:void(0); title="分享到 Blogger" data-sharer=blogger data-url=https://www.jesse233.top/2020/10/arch%E5%AE%89%E8%A3%85/ data-title=Arch安装 data-description><i class="fab fa-blogger fa-fw"></i></a><a href=javascript:void(0); title="分享到 Evernote" data-sharer=evernote data-url=https://www.jesse233.top/2020/10/arch%E5%AE%89%E8%A3%85/ data-title=Arch安装><i class="fab fa-evernote fa-fw"></i></a></span></div></div></div><div class=post-info-more><section class=post-tags></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主页</a></span></section></div><div class=post-nav><a href=/2020/10/elastic%E7%AC%94%E8%AE%B0/ class=prev rel=prev title=Elastic笔记><i class="fas fa-angle-left fa-fw"></i>Elastic笔记</a>
<a href=/2020/10/metaspolit5%E7%AC%94%E8%AE%B0/ class=next rel=next title=Metaspolit5笔记>Metaspolit5笔记<i class="fas fa-angle-right fa-fw"></i></a></div></div><div id=comments><div id=valine class=comment></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://valine.js.org/>Valine</a>.</noscript></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>由 <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.83.1">Hugo</a> 强力驱动 | 主题 - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a></div><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2020 - 2021</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://github.com/jesse996 target=_blank>Jesse</a></span><span class=icp-splitter>&nbsp;|&nbsp;</span><br class=icp-br><span class=icp><a href=https://beian.miit.gov.cn/>鄂ICP备20000568号-2</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title=回到顶部><i class="fas fa-arrow-up fa-fw"></i>
</a><a href=# id=view-comments class=fixed-button title=查看评论><i class="fas fa-comment fa-fw"></i></a></div><link rel=stylesheet href=/lib/valine/valine.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/lightgallery.js@1.2.0/dist/css/lightgallery.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/copy-tex.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css><script type=text/javascript src=https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/smooth-scroll@16.1.3/dist/smooth-scroll.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/autocomplete.js@0.37.1/dist/autocomplete.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lunr@2.3.8/lunr.min.js></script><script type=text/javascript src=/lib/lunr/lunr.stemmer.support.min.js></script><script type=text/javascript src=/lib/lunr/lunr.zh.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.2.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lightgallery.js@1.2.0/dist/js/lightgallery.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lg-zoom.js@1.2.0/dist/lg-zoom.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.4.0/sharer.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/copy-tex.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/mhchem.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js></script><script type=text/javascript src=/baidu.js></script><script type=text/javascript>window.config={code:{copyTitle:"复制到剪贴板",maxShownLines:30},comment:{valine:{appId:"INI3WoInvuBqDhbYssM5bN7F-gzGzoHsz",appKey:"JMKzYaRNR5ck0aapOYkC8yHS",avatar:"mp",el:"#valine",emojiCDN:"https://cdn.jsdelivr.net/npm/emoji-datasource-google@5.0.1/img/google/64/",emojiMaps:{100:"1f4af.png",alien:"1f47d.png",anger:"1f4a2.png",angry:"1f620.png",anguished:"1f627.png",astonished:"1f632.png",black_heart:"1f5a4.png",blue_heart:"1f499.png",blush:"1f60a.png",bomb:"1f4a3.png",boom:"1f4a5.png",broken_heart:"1f494.png",brown_heart:"1f90e.png",clown_face:"1f921.png",cold_face:"1f976.png",cold_sweat:"1f630.png",confounded:"1f616.png",confused:"1f615.png",cry:"1f622.png",crying_cat_face:"1f63f.png",cupid:"1f498.png",dash:"1f4a8.png",disappointed:"1f61e.png",disappointed_relieved:"1f625.png",dizzy:"1f4ab.png",dizzy_face:"1f635.png",drooling_face:"1f924.png",exploding_head:"1f92f.png",expressionless:"1f611.png",face_vomiting:"1f92e.png",face_with_cowboy_hat:"1f920.png",face_with_hand_over_mouth:"1f92d.png",face_with_head_bandage:"1f915.png",face_with_monocle:"1f9d0.png",face_with_raised_eyebrow:"1f928.png",face_with_rolling_eyes:"1f644.png",face_with_symbols_on_mouth:"1f92c.png",face_with_thermometer:"1f912.png",fearful:"1f628.png",flushed:"1f633.png",frowning:"1f626.png",ghost:"1f47b.png",gift_heart:"1f49d.png",green_heart:"1f49a.png",grimacing:"1f62c.png",grin:"1f601.png",grinning:"1f600.png",hankey:"1f4a9.png",hear_no_evil:"1f649.png",heart:"2764-fe0f.png",heart_decoration:"1f49f.png",heart_eyes:"1f60d.png",heart_eyes_cat:"1f63b.png",heartbeat:"1f493.png",heartpulse:"1f497.png",heavy_heart_exclamation_mark_ornament:"2763-fe0f.png",hole:"1f573-fe0f.png",hot_face:"1f975.png",hugging_face:"1f917.png",hushed:"1f62f.png",imp:"1f47f.png",innocent:"1f607.png",japanese_goblin:"1f47a.png",japanese_ogre:"1f479.png",joy:"1f602.png",joy_cat:"1f639.png",kiss:"1f48b.png",kissing:"1f617.png",kissing_cat:"1f63d.png",kissing_closed_eyes:"1f61a.png",kissing_heart:"1f618.png",kissing_smiling_eyes:"1f619.png",laughing:"1f606.png",left_speech_bubble:"1f5e8-fe0f.png",love_letter:"1f48c.png",lying_face:"1f925.png",mask:"1f637.png",money_mouth_face:"1f911.png",nauseated_face:"1f922.png",nerd_face:"1f913.png",neutral_face:"1f610.png",no_mouth:"1f636.png",open_mouth:"1f62e.png",orange_heart:"1f9e1.png",partying_face:"1f973.png",pensive:"1f614.png",persevere:"1f623.png",pleading_face:"1f97a.png",pouting_cat:"1f63e.png",purple_heart:"1f49c.png",rage:"1f621.png",relaxed:"263a-fe0f.png",relieved:"1f60c.png",revolving_hearts:"1f49e.png",right_anger_bubble:"1f5ef-fe0f.png",robot_face:"1f916.png",rolling_on_the_floor_laughing:"1f923.png",scream:"1f631.png",scream_cat:"1f640.png",see_no_evil:"1f648.png",shushing_face:"1f92b.png",skull:"1f480.png",skull_and_crossbones:"2620-fe0f.png",sleeping:"1f634.png",sleepy:"1f62a.png",slightly_frowning_face:"1f641.png",slightly_smiling_face:"1f642.png",smile:"1f604.png",smile_cat:"1f638.png",smiley:"1f603.png",smiley_cat:"1f63a.png",smiling_face_with_3_hearts:"1f970.png",smiling_imp:"1f608.png",smirk:"1f60f.png",smirk_cat:"1f63c.png",sneezing_face:"1f927.png",sob:"1f62d.png",space_invader:"1f47e.png",sparkling_heart:"1f496.png",speak_no_evil:"1f64a.png",speech_balloon:"1f4ac.png","star-struck":"1f929.png",stuck_out_tongue:"1f61b.png",stuck_out_tongue_closed_eyes:"1f61d.png",stuck_out_tongue_winking_eye:"1f61c.png",sunglasses:"1f60e.png",sweat:"1f613.png",sweat_drops:"1f4a6.png",sweat_smile:"1f605.png",thinking_face:"1f914.png",thought_balloon:"1f4ad.png",tired_face:"1f62b.png",triumph:"1f624.png",two_hearts:"1f495.png",unamused:"1f612.png",upside_down_face:"1f643.png",weary:"1f629.png",white_frowning_face:"2639-fe0f.png",white_heart:"1f90d.png",wink:"1f609.png",woozy_face:"1f974.png",worried:"1f61f.png",yawning_face:"1f971.png",yellow_heart:"1f49b.png",yum:"1f60b.png",zany_face:"1f92a.png",zipper_mouth_face:"1f910.png",zzz:"1f4a4.png"},enableQQ:!0,highlight:!0,lang:"zh-cn",pageSize:10,placeholder:"你的评论 ...",recordIP:!0,visitor:!0}},cookieconsent:{content:{dismiss:"同意",link:"了解更多",message:"本网站使用 Cookies 来改善您的浏览体验."},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},lightGallery:{actualSize:!1,exThumbImage:"data-thumbnail",hideBarsDelay:2e3,selector:".lightgallery",speed:400,thumbContHeight:80,thumbWidth:80,thumbnail:!0},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{highlightTag:"em",lunrIndexURL:"/index.json",lunrLanguageCode:"zh",lunrSegmentitURL:"/lib/lunr/lunr.segmentit.js",maxResultLength:10,noResultsFound:"没有找到结果",snippetLength:50,type:"lunr"}}</script><script type=text/javascript src=/js/theme.min.js></script><script type=text/javascript>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-97TKQKDH9W')</script><script type=text/javascript src="https://www.googletagmanager.com/gtag/js?id=G-97TKQKDH9W" async></script></body></html>